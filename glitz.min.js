/** glitz.js v0.1.4 http://github.com/danielmendel/glitz.js/license.txt **/(function(){var a=["ms","moz","webkit","o"];for(var b=0;b<a.length&&!window.requestAnimationFrame;++b)window.requestAnimationFrame=window[a[b]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[b]+"CancelAnimationFrame"]||window[a[b]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(){})})(),function(a){function c(){return function(a){return this instanceof arguments.callee?typeof this.init=="function"?this.init.apply(this,a&&a.callee?a:arguments):!1:new arguments.callee(arguments)}}function d(a,b){var c=0,d=a&&a.length?a.length:a,e,f;for(c=0;c<d;c++){e=typeof a=="number"?c:a[c],f=b(e),f=typeof f=="undefined"?!0:f;if(!f)break}}function e(a,c){for(var d in a)b.call(a,d)&&c.call(a,d)}function f(a){var b,c;if(b=/^\s?[0-9]*,[0-9]*,[0-9]*/.exec(a))a="rgba("+a+")";if(b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(a))c=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1];else if(b=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(a))c=[parseInt(b[1],16)*17,parseInt(b[2],16)*17,parseInt(b[3],16)*17,1];else if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))c=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),1];else if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(a))c=[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4])];return c}function g(a,b,c){e(b,function(d){return typeof b[d]=="object"?g(a[d],b[d],c[d]):a[d]=c[d]})}function h(a,b){e(a,function(c){switch(typeof a[c]){case"string":if(a[c].match(/^\+/))return a[c]=b[c]+parseFloat(a[c].replace(/^\+/,""));if(a[c].match(/^-/))return a[c]=b[c]-parseFloat(a[c].replace(/^\-/,""));if(a[c].match(/^(#|rgb)/))return a[c]=f(a[c]),b[c]=f(b[c]);break;case"object":h(a[c],b[c]);break;default:}})}var b=Object.prototype.hasOwnProperty,i=c(),j=c(),k=c();a.animations=[],i.prototype={to:{},from:{},renderable:null,easing:"easeOutQuad",duration:0,startAt:null,endAt:null,finished:!1,eachFrame:null,done:null,init:function(c,d){var e=this;return e.duration=d.duration||0,e.startAt=(new Date).getTime(),e.endAt=e.startAt+e.duration,e.done=d.done||null,e.to=d.to||{},e.easing=d.easing||e.easing,e.renderable=c,b.call(e.renderable,"engine")?e.renderable.engine.registerAnimation():0,e.from={},g(e.from,e.to,c),h(e.to,e.from),a.animations.push(e),this},step:function(){var a=this,b=(new Date).getTime(),c=a.endAt-b,d=1/(a.duration/c),f=a.renderable,g=a.to,h=a.from,i=a.duration,j=a.easing;return c<=1?(a.stop(),!1):(function k(a,b,d){e(a,function(e){return typeof a[e]=="object"?a[e]instanceof Array&&a[e].length===4?d[e]="rgba("+parseInt(l[j](i-c,b[e][0],a[e][0]-b[e][0],i))+","+parseInt(l[j](i-c,b[e][1],a[e][1]-b[e][1],i))+","+parseInt(l[j](i-c,b[e][2],a[e][2]-b[e][2],i))+","+l[j](i-c,b[e][3],a[e][3]-b[e][3],i)+")":k(a[e],b[e],d[e]):d[e]=l[j](i-c,b[e],a[e]-b[e],i)})}(g,h,f),!0)},stop:function(){var a=this,c=a.to,d=a.renderable;return function f(a,b){e(b,function(c){return typeof b[c]=="object"?b[c]instanceof Array&&b[c].length===4?a[c]="rgba("+parseInt(b[c][0])+","+parseInt(b[c][1])+","+parseInt(b[c][2])+","+parseFloat(b[c][3])+")":f(a[c],b[c]):a[c]=b[c]})}(d,c),typeof a.done=="function"&&a.done.call(d,a),b.call(d,"engine")?d.engine.unregisterAnimation():0,a.finished=!0}},j.prototype={x:0,y:0,scale:1,engine:null,length:0,_id:-1,animation:!1,init:function(a){var b=this,a=a||{};e(a,function(c){b[c]=a[c]})},setup:function(a){a.translate(this.x,this.y),a.scale(this.scale,this.scale)},render:function(a){},push:function(a){a.parent=this,a.registerEngine(this.engine),Array.prototype.push.call(this,a),a._id=this.length-1},registerEngine:function(a){this.engine=a,d(this,function(b){b.registerEngine(a)})},removeChild:function(a){Array.prototype.splice.call(this,a._id,1),d(this,function(b){b._id>a._id&&b._id++})},remove:function(){return this.parent.removeChild(this),this},animate:function(a,b,c){var d=(new Date).getTime(),e={};typeof b=="number"?(e.duration=b,e.done=arguments[2]||function(){}):e={duration:b.duration||250,done:b.done||function(){},easing:b.easing||"easeOutQuad"},typeof b=="function"&&(e.done=b),typeof c=="function"&&(e.done=c),e.to=a,delete this.animation,this.animation=new i(this,e)},draw:function(a){var b=this,a=a||b.engine.ctx,c=b.animation;a.save(),c&&!c.finished&&c.step(),b.setup(a),b.render(a),d(b,function(b){b.draw(a)}),a.restore()}},k.prototype={_dirty:!0,FPS:1e3/60,runningAnimations:0,canvas:null,ctx:null,layout:null,running:!1,init:function(a){var b=this;b.canvas=typeof window.jQuery!="undefined"?jQuery(a)[0]:a,b.ctx=b.canvas.getContext("2d"),b.layout=new j({engine:b,width:b.canvas.width,height:b.canvas.height,backgroundColor:"#fff",clearFrames:!0,background:function(a){},setup:function(a){a.fillStyle=this.backgroundColor,this.clearFrames&&a.fillRect(-1,-1,this.width+1,this.height+1),this.background(a),a.translate(this.x,this.y),a.scale(this.scale,this.scale)}});var c=-1,d=!1;requestAnimationFrame(function e(){d&&(b.start(),d=!1),clearTimeout(c),c=setTimeout(function(){d=!0,b.stop()},100),webkitRequestAnimationFrame(e)}),b.start()},dirty:function(){this._dirty||(this._dirty=!0,this.start())},clean:function(){this._dirty=!1,this.stop()},start:function(){var a=this;if(!a.running)var b=(new Date).getTime();a.running=setInterval(function(){return a._dirty?(a.layout.draw(),a.runningAnimations<1?a.clean():null):a.clean()},a.FPS)},stop:function(){clearInterval(this.running),this.running=!1},registerAnimation:function(){return this.runningAnimations++,this.dirty(),!0},unregisterAnimation:function(){return this.runningAnimations--,!0},push:function(a){this.layout.push(a),this.dirty()},setSize:function(a,b){var c=this.layout,d=this.canvas;c.width=d.width=a,c.height=d.height=b},fps:function(a){this.FPS=1e3/a,this.running&&(this.stop(),this.start())}};var l=i.easingLib={easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return a==0?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return a==0?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(a==0)return b;if((a/=d)==1)return b+c;f||(f=d*.3);if(g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(a==0)return b;if((a/=d)==1)return b+c;f||(f=d*.3);if(g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin((a*d-e)*2*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(a==0)return b;if((a/=d/2)==2)return b+c;f||(f=d*.3*1.5);if(g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return a<1?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin((a*d-e)*2*Math.PI/f)*.5+c+b},easeInBack:function(a,b,c,d,e){return e==undefined&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return e==undefined&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return e==undefined&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,c,d){return c-l.easeOutBounce(d-a,0,c,d)+b},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,b,c,d){return a<d/2?l.easeInBounce(a*2,0,c,d)*.5+b:l.easeOutBounce(a*2-d,0,c,d)*.5+c*.5+b}};a.glitz={Animation:i,Renderable:j,Engine:k,version:"0.1.2"}}(window);